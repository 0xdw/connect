#!/usr/bin/env node

/*!
 * Ext JS Connect
 * Copyright(c) 2010 Ext JS, Inc.
 * MIT Licensed
 */

/**
 * Module dependencies.
 */

var sys = require('sys'),
    fs = require('fs');

/**
 * Argument vector.
 */

var args = process.ARGV.slice(2);

/**
 * Usage documentation.
 */

var usage = ''
    + 'Usage: connect [options] [config-file]\n'
    + '\n'
    + 'Options:\n'
    + '  -h, --help            Display help information\n';
    + '  -I, --include <path>  Unshift the given path to require.paths\n';

/**
 * Exit with the given message.
 *
 * @param  {String} msg
 * @param  {Number} code
 */

function abort(msg, code){
    sys.error(msg);
    process.exit(code || 1);
}

/**
 * Parse the arguments.
 */

(function parseArguments(){
    var arg = args.shift();
    switch (arg) {
        case '-h':
        case '--help':
            abort(usage);
            break;
        case '-I':
        case '--include':
            if (args.length) {
                require.paths.unshift(args.shift());
            } else {
                abort('--include requires a path.');
            }
            break;
    }
})();