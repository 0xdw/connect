<html>
  <head>
    <title>
      
        Connect - http
      
    </title>
    <link rel='stylesheet' href='main.css' />
  </head>
  <body>
    <div id="content">
      
        <h1>http</h1>
        <span class="filename">lib/http.js</span>
      

      
      
        
        
        
        
          <div class="comment">
            
            <p class="description"><p>Initialize a new <code>Server</code> with the given <code>middleware</code>.</p></p>

            
              <div class="body">
                <h2>Examples</h2>

<pre><code>var server = connect.createServer(
    connect.favicon()
  , connect.logger()
  , connect.static(__dirname + &#39;/public&#39;)
);</code></pre>
              </div>
            

            
              <ul class="tags">
              
                

                

                

                
              
                
                  <li class="return"><em>returns</em> <span class="types">Server</span></li>
                

                

                

                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
var Server = exports.Server = function HTTPServer(middleware) {
  this.stack = [];
  middleware.forEach(function(fn){
    this.use(fn);
  }, this);
  http.Server.call(this, this.handle);
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
        
          <div class="comment">
            
              <h3 class="method">.use()</h3>
            
            <p class="description"><p>Utilize the given middleware <code>handle</code> to the given <code>route</code>,
defaulting to <em>/</em>. This &quot;route&quot; is the mount-point for the
middleware, when given a value other than <em>/</em> the middleware
is only effective when that segment is present in the request&#39;s
pathname.</p></p>

            
              <div class="body">
                <p>For example if we were to mount a function at <em>/admin</em>, it would
be invoked on <em>/admin</em>, and <em>/admin/settings</em>, however it would
not be invoked for <em>/</em>, or <em>/posts</em>.</p>

<p>This is effectively the same as passing middleware to <code>connect.createServer()</code>,
however provides a progressive api.</p>

<h2>Examples</h2>

<pre><code> var server = connect.createServer();
 server.use(connect.favicon());
 server.use(connect.logger());
 server.use(connect.static(__dirname + &#39;/public&#39;));</code></pre>

<p>If we wanted to prefix static files with <em>/public</em>, we could
&quot;mount&quot; the <code>static()</code> middleware:</p>

<pre><code> server.use(&#39;/public&#39;, connect.static(__dirname + &#39;/public&#39;));</code></pre>

<p>This api is chainable, meaning the following is valid:</p>

<pre><code> connect.createServer()
   .use(connect.favicon())
   .use(connect.logger())
   .use(connect.static(__dirname + &#39;/public&#39;))
   .listen(3000);</code></pre>
              </div>
            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">String, Function</span> <span class="name">route</span> <span class="description">or handle</span></li>
                
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">handle</span> <span class="description"></span></li>
                
              
                
                  <li class="return"><em>returns</em> <span class="types">Server</span></li>
                

                

                

                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
Server.prototype.use = function(route, handle){
  this.route = '/';

  // default route to '/'
  if ('string' != typeof route) {
    handle = route;
    route = '/';
  }

  // multiples
  if (arguments.length > 2) {
    return Array.prototype.slice.call(arguments, 1).forEach(function(fn){
      this.use(route, fn);
    }, this);
  }

  // wrap sub-apps
  if ('function' == typeof handle.handle) {
    var server = handle;
    server.route = route;
    handle = function(req, res, next) {
      server.handle(req, res, next);
    };
  }

  // wrap vanilla http.Servers
  if (handle instanceof http.Server) {
    handle = handle.listeners('request')[0];
  }

  // normalize route to not trail with slash
  if ('/' == route[route.length - 1]) {
    route = route.substr(0, route.length - 1);
  }

  // add the middleware
  this.stack.push({ route: route, handle: handle });

  // allow chaining
  return this;
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
      
    </div>
  </body>
</html>