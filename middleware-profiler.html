<html>
  <head>
    <title>
      
        Connect - profiler
      
    </title>
    <link rel='stylesheet' href='main.css' />
  </head>
  <body>
    <div id="content">
      
        <h1>profiler</h1>
        <span class="filename">lib/middleware/profiler.js</span>
      

      
      
        
        
        
          <div class="comment">
            
            <p class="description"><p>Profile the duration of a request.</p></p>

            
              <div class="body">
                <p>Typically this middleware should be utilized
<em>above</em> all others, as it proxies the <code>res.end()</code>
method, being first allows it to encapsulate all
other middleware.</p>

<h2>Example Output</h2>

<pre><code> GET /
 response time 2ms
 memory rss 52.00kb
 memory vsize 2.07mb
 heap before 3.76mb / 8.15mb
 heap after 3.80mb / 8.15mb</code></pre>
              </div>
            

            
              <ul class="tags">
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
module.exports = function profiler(){
  return function(req, res, next){
    var end = res.end
      , start = snapshot();

    // state snapshot
    function snapshot() {
      return {
          mem: process.memoryUsage()
        , time: new Date
      };
    }

    // proxy res.end()
    res.end = function(data, encoding){
      res.end = end;
      res.end(data, encoding);
      compare(req, start, snapshot())
    };

    next();
  }
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
        
      
    </div>
  </body>
</html>