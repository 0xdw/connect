<!DOCTYPE html><html><head><title>Connect - High quality middleware for node.js</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" href="style.css"><script src="jquery.js"></script><script src="docs.js"></script></head><body><div id="content"><h1>Connect</h1><p>High quality middleware for node.js</p><div id="Store" class="comment"><h2>Store</h2><div class="description"><p>Initialize abstract <code>Store</code>.</p></div><ul class="tags"></ul><h3>Source</h3><pre><code>var Store = module.exports = function Store(options){};</code></pre></div><div id="Store.prototype.regenerate" class="comment"><h2>Store#regenerate()</h2><div class="description"><p>Re-generate the given requests's session.</p></div><ul class="tags"><li><em>IncomingRequest</em> req </li><li>returns <em>Function</em> fn</li></ul><h3>Source</h3><pre><code>Store.prototype.regenerate = function(req, fn){
  var self = this;
  this.destroy(req.sessionID, function(err){
    self.generate(req);
    fn(err);
  });
};</code></pre></div><div id="Store.prototype.load" class="comment"><h2>Store#load()</h2><div class="description"><p>Load a <code>Session</code> instance via the given <code>sid</code><br />and invoke the callback <code>fn(err, sess)</code>.</p></div><ul class="tags"><li><em>String</em> sid </li><li><em>Function</em> fn </li></ul><h3>Source</h3><pre><code>Store.prototype.load = function(sid, fn){
  var self = this;
  this.get(sid, function(err, sess){
    if (err) return fn(err);
    if (!sess) return fn();
    var req = { sessionID: sid, sessionStore: self };
    sess = self.createSession(req, sess, false);
    fn(null, sess);
  });
};</code></pre></div><div id="Store.prototype.createSession" class="comment"><h2>Store#createSession()</h2><div class="description"><p>Create session from JSON <code>sess</code> data.</p></div><ul class="tags"><li><em>IncomingRequest</em> req </li><li><em>Object</em> sess </li><li>returns <em>Session</em> </li></ul><h3>Source</h3><pre><code>Store.prototype.createSession = function(req, sess, update){
  var expires = sess.cookie.expires
    , orig = sess.cookie.originalMaxAge
    , update = null == update ? true : false;
  sess.cookie = new Cookie(req, sess.cookie);
  if ('string' == typeof expires) sess.cookie.expires = new Date(expires);
  sess.cookie.originalMaxAge = orig;
  req.session = new Session(req, sess);
  if (update) req.session.resetLastAccess();
  return req.session;
};</code></pre></div></div><ul id="menu"><li><a href="#Store">Store</a></li><li><a href="#Store.prototype.regenerate">Store#regenerate()</a></li><li><a href="#Store.prototype.load">Store#load()</a></li><li><a href="#Store.prototype.createSession">Store#createSession()</a></li></ul></body></html>