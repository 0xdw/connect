<!DOCTYPE html><html><head><title>Connect - High quality middleware for node.js</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" href="style.css"><script src="jquery.js"></script><script src="docs.js"></script></head><body><div id="content"><h1>Connect</h1><p>High quality middleware for node.js</p><div id="module.exports" class="comment"><h2></h2><div class="description"><h2>Cookie parser</h2>

<p>Parse <em>Cookie</em> header and populate <code>req.cookies</code><br />with an object keyed by the cookie names. Optionally<br />you may enabled signed cookie support by passing<br />a <code>secret</code> string, which assigns <code>req.secret</code> so<br />it may be used by other middleware such as <code>session()</code>.</p>

<h2>Examples</h2>

<pre><code>connect()
  .use(connect.cookieParser('keyboard cat'))
  .use(function(req, res, next){
    res.end(JSON.stringify(req.cookies));
  })
</code></pre></div><ul class="tags"><li><em>String</em> secret </li><li>returns <em>Function</em> </li></ul><h3>Source</h3><pre><code>module.exports = function cookieParser(secret){
  return function cookieParser(req, res, next) {
    var cookie = req.headers.cookie;
    if (req.cookies) return next();

    req.secret = secret;
    req.cookies = {};
    req.signedCookies = {};
    
    if (cookie) {
      try {
        req.cookies = utils.parseCookie(cookie);
        if (secret) {
          req.signedCookies = utils.parseSignedCookies(req.cookies, secret);
          req.signedCookies = utils.parseJSONCookies(req.signedCookies);
        }
        req.cookies = utils.parseJSONCookies(req.cookies);
      } catch (err) {
        return next(err);
      }
    }
    next();
  };
};</code></pre></div></div><ul id="menu"><li><a href="#module.exports"></a></li></ul></body></html>