<html>
  <head>
    <title>
      
        Connect - memory
      
    </title>
    <link rel='stylesheet' href='main.css' />
  </head>
  <body>
    <div id="content">
      
        <h1>memory</h1>
        <span class="filename">lib/middleware/session/memory.js</span>
      

      
      
        
        
        
        
          <div class="comment">
            
            <p class="description"><p>Initialize a new <code>MemoryStore</code>.</p></p>

            

            
              <ul class="tags">
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
var MemoryStore = module.exports = function MemoryStore() {
  this.sessions = {};
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
        
          <div class="comment">
            
              <h3 class="method">.get()</h3>
            
            <p class="description"><p>Attempt to fetch session by the given <code>sid</code>.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">String</span> <span class="name">sid</span> <span class="description"></span></li>
                
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">fn</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
MemoryStore.prototype.get = function(sid, fn){
  var self = this;
  process.nextTick(function(){
    var expires
      , sess = self.sessions[sid];
    if (sess) {
      sess = JSON.parse(sess);
      expires = 'string' == typeof sess.cookie.expires
        ? new Date(sess.cookie.expires)
        : sess.cookie.expires;
      if (!expires || new Date < expires) {
        fn(null, sess);
      } else {
        self.destroy(sid, fn);
      }
    } else {
      fn();
    }
  });
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
          <div class="comment">
            
              <h3 class="method">.set()</h3>
            
            <p class="description"><p>Commit the given <code>sess</code> object associated with the given <code>sid</code>.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">String</span> <span class="name">sid</span> <span class="description"></span></li>
                
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Session</span> <span class="name">sess</span> <span class="description"></span></li>
                
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">fn</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
MemoryStore.prototype.set = function(sid, sess, fn){
  var self = this;
  process.nextTick(function(){
    self.sessions[sid] = JSON.stringify(sess);
    fn && fn();
  });
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
          <div class="comment">
            
              <h3 class="method">.destroy()</h3>
            
            <p class="description"><p>Destroy the session associated with the given <code>sid</code>.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">String</span> <span class="name">sid</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
MemoryStore.prototype.destroy = function(sid, fn){
  var self = this;
  process.nextTick(function(){
    delete self.sessions[sid];
    fn && fn();
  });
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
          <div class="comment">
            
              <h3 class="method">.all()</h3>
            
            <p class="description"><p>Invoke the given callback <code>fn</code> with all active sessions.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">fn</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
MemoryStore.prototype.all = function(fn){
  var arr = []
    , keys = Object.keys(this.sessions);
  for (var i = 0, len = keys.length; i < len; ++i) {
    arr.push(this.sessions[keys[i]]);
  }
  fn(null, arr);
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
          <div class="comment">
            
              <h3 class="method">.clear()</h3>
            
            <p class="description"><p>Clear all sessions.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">fn</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
MemoryStore.prototype.clear = function(fn){
  this.sessions = {};
  fn && fn();
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
        
          <div class="comment">
            
              <h3 class="method">.undefined()</h3>
            
            <p class="description"><p>Fetch number of sessions.</p></p>

            

            
              <ul class="tags">
              
                

                

                

                
                  <li class="param"><em>param</em> <span class="types">Function</span> <span class="name">fn</span> <span class="description"></span></li>
                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--             -->
          
          </div>
        
      
      
    </div>
  </body>
</html>